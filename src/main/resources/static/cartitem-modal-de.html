<div class="modal-content">
    <div class="modal-header">
        <h2>üìù Warenkorbpositionen Details</h2>
        <button onclick="closeModal()" class="modal-close-btn">&times;</button>
    </div>

    <div class="modal-body">
        <!-- Allgemeine Beschreibung -->
        <div class="description-section">
            <h3>Allgemeine Beschreibung</h3>
            <p>
                CartItemService ist verantwortlich f√ºr die Verwaltung von Produkten im Benutzerwarenkorb.
                Er bietet Hinzuf√ºgen, Entfernen, Aktualisieren und Abrufen von Warenkorbpositionen (CartItem),
                gew√§hrleistet bequeme Benutzerarbeit mit dem Warenkorb, erstellt ihn automatisch bei Bedarf
                und synchronisiert Daten zwischen Order (Warenkorb) und OrderItem (Warenkorbpositionen) Entit√§ten.
            </p>
        </div>

        <!-- Hauptservice-Methoden -->
        <div class="methods-section">
            <h3>Hauptservice-Methoden</h3>

            <div class="method-card">
                <h4>addItemToCart(CartItemRequestDto)</h4>
                <p>F√ºgt Produkt zum aktuellen Benutzerwarenkorb hinzu.</p>
                <div class="method-steps">
                    <div>‚Ä¢ Validiert Eingabedaten (Vorhandensein von productId und Menge)</div>
                    <div>‚Ä¢ Ruft aktuellen Benutzer aus Sicherheitskontext ab</div>
                    <div>‚Ä¢ Pr√ºft, ob Produkt bereits im Warenkorb ist</div>
                    <div>‚Ä¢ Wenn Produkt gefunden - erh√∂ht Menge</div>
                    <div>‚Ä¢ Wenn nicht - erstellt neue OrderItem, verkn√ºpft mit offener Bestellung (Order)</div>
                    <div>‚Ä¢ Speichert √Ñnderungen und gibt DTO des hinzugef√ºgten Produkts zur√ºck</div>
                </div>
            </div>

            <div class="method-card">
                <h4>removeItemFromCart(Integer productId)</h4>
                <p>Entfernt bestimmtes Produkt aus Benutzerwarenkorb.</p>
                <div class="method-steps">
                    <div>‚Ä¢ Validiert ID-Korrektheit</div>
                    <div>‚Ä¢ Ruft Benutzer und aktuellen Warenkorb ab</div>
                    <div>‚Ä¢ Findet OrderItem-Element und l√∂scht es aus Repository</div>
                    <div>‚Ä¢ Gibt DTO des gel√∂schten Elements zur√ºck</div>
                </div>
            </div>

            <div class="method-card">
                <h4>updateItemInCart(CartItemUpdateDto)</h4>
                <p>Aktualisiert Produktmenge im Warenkorb.</p>
                <div class="method-steps">
                    <div>‚Ä¢ Validiert Daten (Vorhandensein von productId und Menge > 0)</div>
                    <div>‚Ä¢ Findet erforderliches OrderItem</div>
                    <div>‚Ä¢ Setzt neue Menge und speichert √Ñnderungen</div>
                    <div>‚Ä¢ Gibt aktualisiertes DTO zur√ºck</div>
                </div>
            </div>

            <div class="method-card">
                <h4>getCartItems()</h4>
                <p>Gibt alle Warenkorbpositionen des aktuellen Benutzers zur√ºck.</p>
                <div class="method-steps">
                    <div>‚Ä¢ Ruft Benutzer und deren offenen Warenkorb ab</div>
                    <div>‚Ä¢ Konvertiert OrderItem-Liste zu CartItemResponseDto-Liste und gibt an Client zur√ºck</div>
                </div>
            </div>
        </div>

        <!-- Hilfsmethoden -->
        <div class="methods-section">
            <h3>Hilfsmethoden</h3>

            <div class="method-card">
                <h4>getCurrentCart(User user)</h4>
                <p>Gibt offenen Warenkorb des Benutzers zur√ºck.</p>
                <div class="method-steps">
                    <div>‚Ä¢ Wenn Warenkorb existiert und OPEN-Status hat - gibt ihn zur√ºck</div>
                    <div>‚Ä¢ Wenn Warenkorb nicht existiert - erstellt neuen Warenkorb (Order) mit OPEN-Status und speichert in Datenbank</div>
                </div>
            </div>

            <div class="method-card">
                <h4>getOrderItemFromCart(User user, Integer productId)</h4>
                <p>Gibt bestimmte Warenkorbposition nach Produkt-ID zur√ºck.</p>
                <div class="method-steps">
                    <div>‚Ä¢ Sucht OrderItem in offener Bestellung des Benutzers</div>
                    <div>‚Ä¢ Wenn Element nicht gefunden - wirft IllegalArgumentException</div>
                </div>
            </div>
        </div>

        <!-- Endpoints -->
        <div class="endpoints-section">
            <h3>REST Endpoints</h3>

            <div class="endpoint-detail">
                <div class="endpoint-header">
                    <span class="http-method post">POST</span>
                    <span class="endpoint-path">/v1/cartItems</span>
                    <span class="role-badge role-user">USER</span>
                </div>
                <p>F√ºgt neues Produkt zum Benutzerwarenkorb hinzu</p>
            </div>

            <div class="endpoint-detail">
                <div class="endpoint-header">
                    <span class="http-method delete">DELETE</span>
                    <span class="endpoint-path">/v1/cartItems/{productId}</span>
                    <span class="role-badge role-user">USER</span>
                </div>
                <p>Entfernt bestimmtes Produkt aus Warenkorb nach Produkt-ID</p>
            </div>

            <div class="endpoint-detail">
                <div class="endpoint-header">
                    <span class="http-method put">PUT</span>
                    <span class="endpoint-path">/v1/cartItems</span>
                    <span class="role-badge role-user">USER</span>
                </div>
                <p>Aktualisiert Produktmenge im Warenkorb</p>
            </div>

            <div class="endpoint-detail">
                <div class="endpoint-header">
                    <span class="http-method get">GET</span>
                    <span class="endpoint-path">/v1/cartItems</span>
                    <span class="role-badge role-user">USER</span>
                </div>
                <p>Ruft alle Warenkorbpositionen des aktuellen Benutzers ab</p>
            </div>
        </div>
    </div>

    <div class="modal-footer">
        <button onclick="closeModal()" class="btn btn-primary">Schlie√üen</button>
    </div>
</div>