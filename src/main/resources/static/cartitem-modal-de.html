<div class="modal-content">
    <div class="modal-header">
        <h2>üìù Warenkorbpositionen Details</h2>
        <button onclick="closeModal()" class="modal-close-btn">&times;</button>
    </div>

    <div class="modal-body">
        <!-- Allgemeine Beschreibung -->
        <div class="description-section">
            <h3>Allgemeine Beschreibung</h3>
            <p>
                CartItemService ist verantwortlich f√ºr die Verwaltung von Produkten im Benutzerwarenkorb.
                Er bietet Hinzuf√ºgen, Entfernen, Aktualisieren und Abrufen von Warenkorbpositionen (CartItem),
                integriert mit Produkt- und Warenkorbdiensten zur Gew√§hrleistung der Datenintegrit√§t.
            </p>
        </div>

        <!-- Hauptservice-Methoden -->
        <div class="methods-section">
            <h3>Hauptservice-Methoden</h3>

            <div class="method-card">
                <h4>addItemToCart(CartItemRequestDto)</h4>
                <p>F√ºgt Produkt zum aktuellen Benutzerwarenkorb hinzu.</p>
                <div class="method-steps">
                    <div>‚Ä¢ Validiert Eingabedaten (productId und quantity nicht null)</div>
                    <div>‚Ä¢ Pr√ºft, dass quantity ‚â• 1</div>
                    <div>‚Ä¢ √úberpr√ºft Produktexistenz √ºber ProductService</div>
                    <div>‚Ä¢ Ruft aktuellen Benutzer und dessen Warenkorb ab</div>
                    <div>‚Ä¢ Pr√ºft, ob Produkt bereits im Warenkorb ist √ºber getCartItemFromCart()</div>
                    <div>‚Ä¢ Wenn Produkt gefunden - erh√∂ht Menge</div>
                    <div>‚Ä¢ Wenn nicht - erstellt neuen CartItem und verkn√ºpft mit Warenkorb</div>
                    <div>‚Ä¢ Speichert √Ñnderungen in CartItemRepository</div>
                    <div>‚Ä¢ Aktualisiert Warenkorb √ºber CartService.saveCart()</div>
                    <div>‚Ä¢ Gibt CartItemSympleResponseDto zur√ºck</div>
                </div>
            </div>

            <div class="method-card">
                <h4>removeItemFromCart(Integer productId)</h4>
                <p>Entfernt bestimmtes Produkt aus Benutzerwarenkorb.</p>
                <div class="method-steps">
                    <div>‚Ä¢ Pr√ºft, dass productId nicht null ist</div>
                    <div>‚Ä¢ Ruft aktuellen Warenkorb √ºber CartService ab</div>
                    <div>‚Ä¢ Sucht CartItem nach productId in Warenkorbpositionen</div>
                    <div>‚Ä¢ Wenn nicht gefunden - NotFoundException</div>
                    <div>‚Ä¢ Entfernt Element aus Warenkorb und aus CartItemRepository</div>
                    <div>‚Ä¢ Speichert aktualisierten Warenkorb</div>
                    <div>‚Ä¢ Gibt CartItemResponseDto des entfernten Elements zur√ºck</div>
                </div>
            </div>

            <div class="method-card">
                <h4>updateItemInCart(CartItemUpdateDto)</h4>
                <p>Aktualisiert Produktmenge im Warenkorb.</p>
                <div class="method-steps">
                    <div>‚Ä¢ Validiert Daten (productId und quantity nicht null)</div>
                    <div>‚Ä¢ Pr√ºft, dass quantity ‚â• 1</div>
                    <div>‚Ä¢ √úberpr√ºft Produktexistenz √ºber ProductService</div>
                    <div>‚Ä¢ Sucht CartItem im Warenkorb √ºber getCartItemFromCart()</div>
                    <div>‚Ä¢ Wenn nicht gefunden - NotFoundException</div>
                    <div>‚Ä¢ Setzt neue Menge und speichert in CartItemRepository</div>
                    <div>‚Ä¢ Gibt CartItemResponseDto des aktualisierten Elements zur√ºck</div>
                </div>
            </div>

            <div class="method-card">
                <h4>getCartItems()</h4>
                <p>Gibt alle Warenkorbpositionen des aktuellen Benutzers zur√ºck.</p>
                <div class="method-steps">
                    <div>‚Ä¢ Ruft aktuellen Warenkorb √ºber CartService ab</div>
                    <div>‚Ä¢ Extrahiert Set<CartItem> aus Warenkorb</div>
                    <div>‚Ä¢ Konvertiert zu Set<CartItemFullResponseDto> √ºber CartItemConverter</div>
                    <div>‚Ä¢ Gibt Ergebnis zur√ºck</div>
                </div>
            </div>
        </div>

        <!-- Hilfsmethoden -->
        <div class="methods-section">
            <h3>Hilfsmethoden</h3>

            <div class="method-card">
                <h4>getCartItemFromCart(Integer productId)</h4>
                <p>Findet bestimmte Warenkorbposition nach Produkt-ID.</p>
                <div class="method-steps">
                    <div>‚Ä¢ Ruft aktuellen Benutzer ab</div>
                    <div>‚Ä¢ Extrahiert Benutzerwarenkorb</div>
                    <div>‚Ä¢ Sucht CartItem nach productId in Warenkorbpositionen</div>
                    <div>‚Ä¢ Gibt Optional<CartItem> zur√ºck</div>
                </div>
            </div>
        </div>

        <!-- DTO Objekte -->
        <div class="methods-section">
            <h3>üìä DTO Objekte</h3>

            <div class="method-card">
                <h4>CartItemRequestDto</h4>
                <p>F√ºr Hinzuf√ºgen von Produkt zum Warenkorb</p>
                <div class="method-steps">
                    <div>‚Ä¢ productId: Integer - Produktkennung</div>
                    <div>‚Ä¢ quantity: Integer - Menge (‚â• 1)</div>
                </div>
            </div>

            <div class="method-card">
                <h4>CartItemUpdateDto</h4>
                <p>F√ºr Aktualisieren der Produktmenge</p>
                <div class="method-steps">
                    <div>‚Ä¢ productId: Integer - Produktkennung</div>
                    <div>‚Ä¢ quantity: Integer - neue Menge (‚â• 1)</div>
                </div>
            </div>

            <div class="method-card">
                <h4>CartItemResponseDto</h4>
                <p>Vollst√§ndige Informationen √ºber Produkt im Warenkorb</p>
                <div class="method-steps">
                    <div>‚Ä¢ Enth√§lt vollst√§ndige Produktdaten und Menge</div>
                </div>
            </div>

            <div class="method-card">
                <h4>CartItemSympleResponseDto</h4>
                <p>Vereinfachte Version f√ºr Add-Operation-Antwort</p>
                <div class="method-steps">
                    <div>‚Ä¢ Enth√§lt grundlegende Informationen √ºber hinzugef√ºgtes Produkt</div>
                </div>
            </div>

            <div class="method-card">
                <h4>CartItemFullResponseDto</h4>
                <p>F√ºr Abrufen aller Warenkorbpositionen</p>
                <div class="method-steps">
                    <div>‚Ä¢ Wird in getCartItems() verwendet</div>
                </div>
            </div>
        </div>

        <!-- Endpoints -->
        <div class="endpoints-section">
            <h3>REST Endpoints</h3>

            <div class="endpoint-detail">
                <div class="endpoint-header">
                    <span class="http-method post">POST</span>
                    <span class="endpoint-path">/v1/cartItems</span>
                    <span class="role-badge role-user">USER</span>
                </div>
                <p>F√ºgt neues Produkt zum Benutzerwarenkorb hinzu. Gibt CartItemSympleResponseDto zur√ºck.</p>
            </div>

            <div class="endpoint-detail">
                <div class="endpoint-header">
                    <span class="http-method delete">DELETE</span>
                    <span class="endpoint-path">/v1/cartItems/{productId}</span>
                    <span class="role-badge role-user">USER</span>
                </div>
                <p>Entfernt bestimmtes Produkt aus Warenkorb nach Produkt-ID. Gibt CartItemResponseDto zur√ºck.</p>
            </div>

            <div class="endpoint-detail">
                <div class="endpoint-header">
                    <span class="http-method put">PUT</span>
                    <span class="endpoint-path">/v1/cartItems</span>
                    <span class="role-badge role-user">USER</span>
                </div>
                <p>Aktualisiert Produktmenge im Warenkorb. Gibt CartItemResponseDto zur√ºck.</p>
            </div>

            <div class="endpoint-detail">
                <div class="endpoint-header">
                    <span class="http-method get">GET</span>
                    <span class="endpoint-path">/v1/cartItems</span>
                    <span class="role-badge role-user">USER</span>
                </div>
                <p>Ruft alle Warenkorbpositionen des aktuellen Benutzers ab. Gibt Set<CartItemFullResponseDto> zur√ºck.</p>
            </div>
        </div>

        <!-- Implementierungsmerkmale -->
        <div class="features-section">
            <h3>üîß Implementierungsmerkmale</h3>
            <div class="method-card">
                <div class="method-steps">
                    <div>‚Ä¢ <strong>Integration mit ProductService:</strong> √úberpr√ºfung der Produktexistenz vor Operationen</div>
                    <div>‚Ä¢ <strong>Datenvalidierung:</strong> Pr√ºfung auf Null-Werte und Mindestmenge</div>
                    <div>‚Ä¢ <strong>Transaktionssicherheit:</strong> Alle Operationen werden innerhalb von Transaktionen durchgef√ºhrt</div>
                    <div>‚Ä¢ <strong>DTO-Konvertierung:</strong> Verwendung von CartItemConverter f√ºr Datentransformation</div>
                    <div>‚Ä¢ <strong>Warenkorb-Synchronisation:</strong> Automatische Warenkorbaktualisierung nach √Ñnderungen</div>
                    <div>‚Ä¢ <strong>Fehlerbehandlung:</strong> Detaillierte Ausnahmen f√ºr verschiedene Szenarien</div>
                </div>
            </div>
        </div>

        <!-- Gesch√§ftslogik -->
        <div class="business-logic-section">
            <h3>üíº Gesch√§ftslogik</h3>
            <div class="method-card">
                <div class="method-steps">
                    <div>‚Ä¢ <strong>Mengenverwaltung:</strong> Automatische Mengenerh√∂hung beim Hinzuf√ºgen bestehender Produkte</div>
                    <div>‚Ä¢ <strong>Datenintegrit√§t:</strong> √úberpr√ºfung der Produktexistenz vor Warenkorboperationen</div>
                    <div>‚Ä¢ <strong>Eingabevalidierung:</strong> Sicherstellung der Datenkorrektheit vor dem Speichern</div>
                    <div>‚Ä¢ <strong>Abfrageoptimierung:</strong> Minimierung der Datenbankaufrufe</div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal-footer">
        <button onclick="closeModal()" class="btn btn-primary">Schlie√üen</button>
    </div>
</div>