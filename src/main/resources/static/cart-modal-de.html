<div class="modal-content">
    <div class="modal-header">
        <h2>üõí Warenkorb Details</h2>
        <button onclick="closeModal()" class="modal-close-btn">&times;</button>
    </div>

    <div class="modal-body">
        <!-- Allgemeine Beschreibung -->
        <div class="description-section">
            <h3>Allgemeine Beschreibung</h3>
            <p>
                Das Warenkorbmodul ist verantwortlich f√ºr die Verwaltung von Produkten, die der Benutzer zu kaufen plant.
                Enth√§lt Funktionen zum Hinzuf√ºgen, Entfernen, √Ñndern der Produktmengen sowie
                zum Konvertieren des Warenkorbs in eine Bestellung. Integriert mit Rabattsystem und Bestellverwaltung.
            </p>
        </div>

        <!-- Hauptservice-Methoden -->
        <div class="methods-section">
            <h3>Hauptservice-Methoden</h3>

            <div class="method-card">
                <h4>clearCart()</h4>
                <p>Leert den Warenkorb des aktuellen Benutzers.</p>
                <div class="method-steps">
                    <div>‚Ä¢ Ruft aktuellen Benutzer √ºber UserService ab</div>
                    <div>‚Ä¢ L√∂scht alle Warenkorbpositionen</div>
                    <div>‚Ä¢ Speichert Benutzer√§nderungen √ºber UserRepository</div>
                </div>
            </div>

            <div class="method-card">
                <h4>transferCartToOrder()</h4>
                <p>√úbertr√§gt Warenkorbinhalt in neue Bestellung.</p>
                <div class="method-steps">
                    <div>‚Ä¢ Ruft aktuellen Warenkorb und Benutzer ab</div>
                    <div>‚Ä¢ Pr√ºft, dass Warenkorb nicht leer ist</div>
                    <div>‚Ä¢ Validiert discountPrice-Vorhandensein f√ºr alle Produkte</div>
                    <div>‚Ä¢ Pr√ºft Abwesenheit von Bestellungen mit PENDING_PAYMENT-Status</div>
                    <div>‚Ä¢ Konvertiert CartItem zu OrderItem √ºber cartItemConverter</div>
                    <div>‚Ä¢ Erstellt neues Order-Objekt mit PENDING_PAYMENT-Status</div>
                    <div>‚Ä¢ Setzt DeliveryMethod.PICKUP als Standard</div>
                    <div>‚Ä¢ Setzt created_at und updated_at Zeitstempel</div>
                    <div>‚Ä¢ Speichert Bestellung √ºber OrderRepository</div>
                    <div>‚Ä¢ Leert Warenkorb nach erfolgreicher √úbertragung</div>
                </div>
            </div>

            <div class="method-card">
                <h4>getCartFullData()</h4>
                <p>Gibt vollst√§ndige Warenkorbinformationen als CartResponseDto zur√ºck.</p>
                <div class="method-steps">
                    <div>‚Ä¢ Ruft aktuellen Benutzer und Warenkorb ab</div>
                    <div>‚Ä¢ Konvertiert Warenkorbpositionen zu CartItemResponseDto</div>
                    <div>‚Ä¢ Berechnet Gesamtkosten unter Ber√ºcksichtigung von Rabatten</div>
                    <div>‚Ä¢ Konvertiert zu CartItemSympleResponseDto f√ºr Antwort</div>
                    <div>‚Ä¢ Berechnungsformel: (price * quantity) * (100 - discountPrice) / 100</div>
                    <div>‚Ä¢ Gibt DTO mit ID, Produktliste und Gesamtbetrag zur√ºck</div>
                </div>
            </div>

            <div class="method-card">
                <h4>getCurrentCart()</h4>
                <p>Gibt Warenkorb des aktuellen Benutzers zur√ºck.</p>
                <div class="method-steps">
                    <div>‚Ä¢ Ruft Benutzer √ºber UserService ab</div>
                    <div>‚Ä¢ Pr√ºft, dass Warenkorb nicht null ist</div>
                    <div>‚Ä¢ Sucht Warenkorb √ºber CartRepository</div>
                    <div>‚Ä¢ Wenn Warenkorb nicht vorhanden - BadRequestException("Cart is empty")</div>
                </div>
            </div>

            <div class="method-card">
                <h4>saveCart(Cart cart)</h4>
                <p>Speichert Benutzerwarenkorb in der Datenbank.</p>
                <div class="method-steps">
                    <div>‚Ä¢ Pr√ºft, dass Warenkorbobjekt nicht null ist</div>
                    <div>‚Ä¢ Pr√ºft Vorhandensein von Benutzer und Warenkorbpositionen</div>
                    <div>‚Ä¢ Speichert Warenkorb √ºber CartRepository</div>
                </div>
            </div>
        </div>

        <!-- Endpoints -->
        <div class="endpoints-section">
            <h3>REST Endpoints</h3>

            <div class="endpoint-detail">
                <div class="endpoint-header">
                    <span class="http-method get">GET</span>
                    <span class="endpoint-path">/v1/carts</span>
                    <span class="role-badge role-user">USER</span>
                </div>
                <p>Ruft vollst√§ndige Informationen √ºber den Warenkorb des aktuellen Benutzers mit Gesamtkostenberechnung inklusive Rabatte ab</p>
            </div>

            <div class="endpoint-detail">
                <div class="endpoint-header">
                    <span class="http-method delete">DELETE</span>
                    <span class="endpoint-path">/v1/carts</span>
                    <span class="role-badge role-user">USER</span>
                </div>
                <p>Leert gesamten Warenkorb des aktuellen Benutzers</p>
            </div>

            <div class="endpoint-detail">
                <div class="endpoint-header">
                    <span class="http-method get">GET</span>
                    <span class="endpoint-path">/v1/carts/toOrder</span>
                    <span class="role-badge role-user">USER</span>
                </div>
                <p>Konvertiert Warenkorb in Bestellung mit anschlie√üender Warenkorbleerung. Pr√ºft Abwesenheit ausstehender Bestellungen.</p>
            </div>
        </div>

        <!-- Implementierungsmerkmale -->
        <div class="features-section">
            <h3>üîß Implementierungsmerkmale</h3>
            <div class="method-card">
                <div class="method-steps">
                    <div>‚Ä¢ <strong>Rabattsystem:</strong> Automatische Kostenberechnung unter Ber√ºcksichtigung von discountPrice</div>
                    <div>‚Ä¢ <strong>Datenvalidierung:</strong> Pr√ºfung erforderlicher Felder vor Operationen</div>
                    <div>‚Ä¢ <strong>Datenkonvertierung:</strong> Verwendung von CartItemConverter f√ºr Transformation zwischen DTO und Entity</div>
                    <div>‚Ä¢ <strong>Bestellverwaltung:</strong> Integration mit OrderRepository f√ºr Bestellerstellung</div>
                    <div>‚Ä¢ <strong>Bestellstatus:</strong> Unterst√ºtzung f√ºr PENDING_PAYMENT-Status f√ºr neue Bestellungen</div>
                    <div>‚Ä¢ <strong>Liefermethoden:</strong> Verwendung von DeliveryMethod.PICKUP als Standard</div>
                    <div>‚Ä¢ <strong>Transaktionssicherheit:</strong> Alle kritischen Operationen werden innerhalb von Transaktionen durchgef√ºhrt</div>
                </div>
            </div>
        </div>

        <!-- Gesch√§ftslogik -->
        <div class="business-logic-section">
            <h3>üíº Gesch√§ftslogik</h3>
            <div class="method-card">
                <div class="method-steps">
                    <div>‚Ä¢ <strong>Einkaufswagen:</strong> Tempor√§re Speicherung von Produkten vor Bestellabschluss</div>
                    <div>‚Ä¢ <strong>Bestellabwicklung:</strong> Konvertierung des Warenkorbs in Bestellung mit Validierungen</div>
                    <div>‚Ä¢ <strong>Rabattsystem:</strong> Automatische Anwendung von Rabatten auf Produkte</div>
                    <div>‚Ä¢ <strong>Zustandsverwaltung:</strong> Verhinderung doppelter Bestellerstellung</div>
                    <div>‚Ä¢ <strong>Kostenberechnung:</strong> Genaue Berechnung des Gesamtbetrags unter Ber√ºcksichtigung von Menge und Rabatten</div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal-footer">
        <button onclick="closeModal()" class="btn btn-primary">Schlie√üen</button>
    </div>
</div>