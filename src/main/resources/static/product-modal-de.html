<div class="modal-content">
    <div class="modal-header">
        <h2>üì¶ Produktverwaltung Details</h2>
        <button onclick="closeModal()" class="modal-close-btn">&times;</button>
    </div>

    <div class="modal-body">
        <!-- Allgemeine Beschreibung -->
        <div class="description-section">
            <h3>Allgemeine Beschreibung</h3>
            <p>
                ProductService ist verantwortlich f√ºr die Produktverwaltung.
                F√ºhrt Operationen zum Hinzuf√ºgen, Aktualisieren, L√∂schen und Abrufen von Produkten mit verschiedenen Filter- und Sortierkriterien durch.
                Bietet vollst√§ndigen Lebenszyklus der Produktkatalogverwaltung f√ºr den Shop mit Paginierungsunterst√ºtzung.
            </p>
        </div>

        <!-- Hauptservice-Methoden -->
        <div class="methods-section">
            <h3>Hauptservice-Methoden</h3>

            <div class="method-card">
                <h4>addProduct(ProductRequestDto productRequestDto)</h4>
                <p>F√ºgt ein neues Produkt hinzu.</p>
                <div class="method-steps">
                    <div>‚Ä¢ Validiert Produktanforderungsdaten (Namenl√§nge, Preis > 0, etc.)</div>
                    <div>‚Ä¢ Ruft Kategorie nach Namen von CategoryService ab</div>
                    <div>‚Ä¢ Pr√ºft, dass Produkt mit diesem Namen in der Kategorie nicht existiert</div>
                    <div>‚Ä¢ L√∂st Bild-URL mit ProductServiceHelper auf</div>
                    <div>‚Ä¢ Erstellt Product-Objekt mit aktuellem Zeitstempel und speichert √ºber ProductRepository</div>
                    <div>‚Ä¢ Behandelt Race Conditions mit DataIntegrityViolationException</div>
                    <div>‚Ä¢ Gibt ProductResponseDto √ºber ProductConverter zur√ºck</div>
                </div>
            </div>

            <div class="method-card">
                <h4>updateProduct(Integer productId, ProductUpdateDto productUpdateDto)</h4>
                <p>Aktualisiert Daten eines bestehenden Produkts.</p>
                <div class="method-steps">
                    <div>‚Ä¢ Findet Produkt nach ID, wenn nicht gefunden - wirft IllegalArgumentException</div>
                    <div>‚Ä¢ Validiert Eindeutigkeit von neuem Kategorienamen und Namen innerhalb der Kategorie</div>
                    <div>‚Ä¢ Aktualisiert Kategorie, Name, Beschreibung, Preis, Rabatt und Bild</div>
                    <div>‚Ä¢ Validiert Datenkorrektheit (Namenl√§nge 3-20, Preis > 0, etc.)</div>
                    <div>‚Ä¢ Aktualisiert √Ñnderungszeitstempel</div>
                    <div>‚Ä¢ Speichert Produkt √ºber ProductRepository</div>
                    <div>‚Ä¢ Gibt ProductResponseDto zur√ºck</div>
                </div>
            </div>

            <div class="method-card">
                <h4>setDiscountPrice(Integer productId, BigDecimal newDiscountPrice)</h4>
                <p>Setzt neuen Rabatt f√ºr Produkt.</p>
                <div class="method-steps">
                    <div>‚Ä¢ Validiert, dass productId und newDiscountPrice nicht null sind</div>
                    <div>‚Ä¢ Validiert, dass Rabattpreis nicht negativ ist</div>
                    <div>‚Ä¢ Findet Produkt nach ID</div>
                    <div>‚Ä¢ Setzt discountPrice und aktualisiert Zeitstempel</div>
                    <div>‚Ä¢ Speichert Produkt und gibt ProductResponseDto zur√ºck</div>
                </div>
            </div>

            <div class="method-card">
                <h4>deleteProduct(Integer productId)</h4>
                <p>L√∂scht Produkt.</p>
                <div class="method-steps">
                    <div>‚Ä¢ Findet Produkt nach ID</div>
                    <div>‚Ä¢ L√∂scht es √ºber ProductRepository</div>
                    <div>‚Ä¢ Gibt ProductResponseDto des gel√∂schten Produkts zur√ºck</div>
                </div>
            </div>

            <div class="method-card">
                <h4>getProductsByCriteria(String paramName, String paramValue, Pageable pageable)</h4>
                <p>Ruft paginierte Liste von Produkten nach bestimmten Kriterien ab.</p>
                <div class="method-steps">
                    <div>‚Ä¢ Verarbeitet Parameter: price, discount, category, name, createDate</div>
                    <div>‚Ä¢ F√ºr Preis: Parst Bereich aus "minPrice-maxPrice" Format</div>
                    <div>‚Ä¢ Ruft entsprechende Repository-Methoden mit Paginierung auf</div>
                    <div>‚Ä¢ Gibt Page of ProductResponseDto zur√ºck</div>
                </div>
            </div>

            <div class="method-card">
                <h4>getProductsForUser(Pageable pageable)</h4>
                <p>Ruft paginierte Liste von Produkten f√ºr regul√§re Benutzer ab.</p>
                <div class="method-steps">
                    <div>‚Ä¢ Ruft alle Produkte mit Paginierung ab</div>
                    <div>‚Ä¢ Konvertiert zu ProductResponseForUserDto (vereinfachte Ansicht)</div>
                    <div>‚Ä¢ Gibt Page of ProductResponseForUserDto zur√ºck</div>
                </div>
            </div>

            <div class="method-card">
                <h4>getTopFiveDiscountedProductsOfTheDay()</h4>
                <p>Ruft Top-5 Produkte mit h√∂chstem Rabatt ab.</p>
                <div class="method-steps">
                    <div>‚Ä¢ Erstellt PageRequest f√ºr 5 Elemente, sortiert nach Rabatt absteigend</div>
                    <div>‚Ä¢ Findet Produkte mit discountPrice gr√∂√üer null</div>
                    <div>‚Ä¢ Konvertiert zu ProductResponseForUserDto Liste</div>
                    <div>‚Ä¢ Wirft NotFoundException wenn keine rabattierten Produkte gefunden</div>
                    <div>‚Ä¢ Gibt Liste von ProductResponseForUserDto zur√ºck</div>
                </div>
            </div>
        </div>

        <!-- Endpoints -->
        <div class="endpoints-section">
            <h3>REST Endpoints</h3>

            <div class="endpoint-detail">
                <div class="endpoint-header">
                    <span class="http-method post">POST</span>
                    <span class="endpoint-path">/v1/products</span>
                    <span class="role-badge role-admin">ADMIN</span>
                    <span class="role-badge role-manager">MANAGER</span>
                </div>
                <p>Erstellt neues Produkt (erfordert MANAGER oder ADMIN Rolle)</p>
            </div>

            <div class="endpoint-detail">
                <div class="endpoint-header">
                    <span class="http-method put">PUT</span>
                    <span class="endpoint-path">/v1/products/{productId}</span>
                    <span class="role-badge role-admin">ADMIN</span>
                    <span class="role-badge role-manager">MANAGER</span>
                </div>
                <p>Aktualisiert Produktdaten (erfordert MANAGER oder ADMIN Rolle)</p>
            </div>

            <div class="endpoint-detail">
                <div class="endpoint-header">
                    <span class="http-method delete">DELETE</span>
                    <span class="endpoint-path">/v1/products/{productId}</span>
                    <span class="role-badge role-admin">ADMIN</span>
                    <span class="role-badge role-manager">MANAGER</span>
                </div>
                <p>L√∂scht Produkt (erfordert MANAGER oder ADMIN Rolle)</p>
            </div>

            <div class="endpoint-detail">
                <div class="endpoint-header">
                    <span class="http-method get">GET</span>
                    <span class="endpoint-path">/v1/products/updateProductDiscount/{productId}/{newDiscount}</span>
                    <span class="role-badge role-admin">ADMIN</span>
                    <span class="role-badge role-manager">MANAGER</span>
                </div>
                <p>Aktualisiert Rabatt f√ºr Produkt (erfordert MANAGER oder ADMIN Rolle)</p>
            </div>

            <div class="endpoint-detail">
                <div class="endpoint-header">
                    <span class="http-method get">GET</span>
                    <span class="endpoint-path">/v1/products</span>
                    <span class="role-badge role-admin">ADMIN</span>
                    <span class="role-badge role-manager">MANAGER</span>
                </div>
                <p>Ruft alle Produkte mit vollst√§ndigen Details ab (erfordert MANAGER oder ADMIN Rolle)</p>
                <div class="endpoint-params">
                    <strong>Parameter:</strong> page, size, sort, direction
                </div>
            </div>

            <div class="endpoint-detail">
                <div class="endpoint-header">
                    <span class="http-method get">GET</span>
                    <span class="endpoint-path">/v1/products/getAllProductForUser</span>
                    <span class="role-badge role-user">USER</span>
                </div>
                <p>Ruft alle Produkte mit vereinfachten Informationen f√ºr Benutzer ab</p>
                <div class="endpoint-params">
                    <strong>Parameter:</strong> page, size, sort, direction
                </div>
            </div>

            <div class="endpoint-detail">
                <div class="endpoint-header">
                    <span class="http-method get">GET</span>
                    <span class="endpoint-path">/v1/products/getProductsByCriteria</span>
                    <span class="role-badge role-user">USER</span>
                </div>
                <p>Suchprodukte nach Kriterien (Preis, Kategorie, Name, etc.)</p>
                <div class="endpoint-params">
                    <strong>Parameter:</strong> paramName, paramValue, sortDirection, page, size
                </div>
            </div>

            <div class="endpoint-detail">
                <div class="endpoint-header">
                    <span class="http-method get">GET</span>
                    <span class="endpoint-path">/v1/products/getTopFiveProducts</span>
                    <span class="role-badge role-user">USER</span>
                </div>
                <p>Ruft Top-5 Produkte mit h√∂chsten Rabatten ab</p>
            </div>
        </div>

        <!-- Implementierungsmerkmale -->
        <div class="features-section">
            <h3>üîß Implementierungsmerkmale</h3>
            <div class="method-card">
                <div class="method-steps">
                    <div>‚Ä¢ <strong>Berechtigungstrennung:</strong> Verschiedene Zugriffsebenen f√ºr Benutzer, MANAGER und ADMIN</div>
                    <div>‚Ä¢ <strong>Paginierungsunterst√ºtzung:</strong> Alle Listenoperationen unterst√ºtzen Paginierung und Sortierung</div>
                    <div>‚Ä¢ <strong>Flexible Suche:</strong> Unterst√ºtzung mehrerer Filterkriterien mit automatischer Parameterbehandlung</div>
                    <div>‚Ä¢ <strong>Datenvalidierung:</strong> Umfassende Validierung von Preisen, Rabatten, Namen und Kategorien</div>
                    <div>‚Ä¢ <strong>Produkteindeutigkeit:</strong> Garantie f√ºr eindeutigen Produktnamen innerhalb der Kategorie mit Race-Condition-Schutz</div>
                    <div>‚Ä¢ <strong>Bildbehandlung:</strong> Automatische Bild-URL-Aufl√∂sung und Validierung</div>
                    <div>‚Ä¢ <strong>Zeitstempelverwaltung:</strong> Automatische Handhabung von Erstellungs- und Aktualisierungszeitstempeln</div>
                </div>
            </div>
        </div>

        <!-- Gesch√§ftslogik -->
        <div class="business-logic-section">
            <h3>üíº Gesch√§ftslogik</h3>
            <div class="method-card">
                <div class="method-steps">
                    <div>‚Ä¢ <strong>Preispolitik:</strong> Unterst√ºtzung f√ºr regul√§re Preise und Rabattpreise mit Validierung</div>
                    <div>‚Ä¢ <strong>Kategorisierung:</strong> Klare Organisation von Produkten nach Kategorien mit Eindeutigkeitsdurchsetzung</div>
                    <div>‚Ä¢ <strong>Promotionen:</strong> Top-5 rabattierte Produkte Mechanismus zur Verkaufsf√∂rderung</div>
                    <div>‚Ä¢ <strong>Managementflexibilit√§t:</strong> M√∂glichkeit zur schnellen Aktualisierung von Preisen, Rabatten und Produktinformationen</div>
                    <div>‚Ä¢ <strong>Suche und Filterung:</strong> Bequeme Produktsuche nach Preisbereichen, Kategorien, Namen und Erstellungsdaten</div>
                    <div>‚Ä¢ <strong>Benutzererfahrung:</strong> Getrennte Ansichten f√ºr Administratoren (vollst√§ndige Informationen) und Benutzer (vereinfachte Informationen)</div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal-footer">
        <button onclick="closeModal()" class="btn btn-primary">Schlie√üen</button>
    </div>
</div>