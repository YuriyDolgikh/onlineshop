<div class="modal-content">
    <div class="modal-header">
        <h2>üìã Bestellverwaltung Details</h2>
        <button onclick="closeModal()" class="modal-close-btn">&times;</button>
    </div>

    <div class="modal-body">
        <!-- Allgemeine Beschreibung -->
        <div class="description-section">
            <h3>Allgemeine Beschreibung</h3>
            <p>
                OrderService ist verantwortlich f√ºr die Verwaltung von Benutzerbestellungen.
                F√ºhrt Operationen zum Speichern, Abrufen, Aktualisieren des Status, Stornieren und Best√§tigen von Bestellzahlungen durch.
                Bietet vollst√§ndigen Bestelllebenszyklus von der Erstellung bis zum Abschluss.
            </p>
        </div>

        <!-- Hauptservice-Methoden -->
        <div class="methods-section">
            <h3>Hauptservice-Methoden</h3>

            <div class="method-card">
                <h4>saveOrder(OrderRequestDto dto)</h4>
                <p>Speichert neue Bestellung f√ºr aktuellen Benutzer.</p>
                <div class="method-steps">
                    <div>‚Ä¢ Pr√ºft, dass dto nicht null ist, sonst wirft BadRequestException</div>
                    <div>‚Ä¢ Konvertiert Liefermethode zu enum Order.DeliveryMethod</div>
                    <div>‚Ä¢ Ruft aktuellen Benutzer ab</div>
                    <div>‚Ä¢ Erstellt Order-Objekt mit Daten aus dto und PENDING_PAYMENT-Status</div>
                    <div>‚Ä¢ Wenn Bestellpositionen angegeben, f√ºgt sie √ºber OrderItemService hinzu</div>
                    <div>‚Ä¢ Speichert Bestellung √ºber OrderRepository</div>
                    <div>‚Ä¢ Gibt OrderResponseDto √ºber OrderConverter zur√ºck</div>
                </div>
            </div>

            <div class="method-card">
                <h4>getOrderById(Integer orderId)</h4>
                <p>Ruft Bestellung nach ID ab.</p>
                <div class="method-steps">
                    <div>‚Ä¢ Pr√ºft Zugriff auf Bestellung √ºber isAccessToOrderAllowed()</div>
                    <div>‚Ä¢ Findet Bestellung nach ID, wenn nicht gefunden - wirft NotFoundException</div>
                    <div>‚Ä¢ Gibt OrderResponseDto √ºber OrderConverter zur√ºck</div>
                </div>
            </div>

            <div class="method-card">
                <h4>getOrdersByUser(Integer userId)</h4>
                <p>Ruft Liste von Benutzerbestellungen ab.</p>
                <div class="method-steps">
                    <div>‚Ä¢ Pr√ºft, dass userId nicht null ist</div>
                    <div>‚Ä¢ Findet Benutzer nach ID, wenn nicht gefunden - wirft NotFoundException</div>
                    <div>‚Ä¢ Pr√ºft, dass regul√§rer Benutzer nur eigene Bestellungen anfordert, sonst AccessDeniedException</div>
                    <div>‚Ä¢ Ruft Bestellliste √ºber OrderRepository ab</div>
                    <div>‚Ä¢ Gibt Liste von OrderResponseDto √ºber OrderConverter zur√ºck</div>
                </div>
            </div>

            <div class="method-card">
                <h4>cancelOrder(Integer orderId)</h4>
                <p>Storniert Bestellung.</p>
                <div class="method-steps">
                    <div>‚Ä¢ Pr√ºft Zugriff auf Bestellung</div>
                    <div>‚Ä¢ Findet Bestellung nach ID, wenn nicht gefunden - wirft NotFoundException</div>
                    <div>‚Ä¢ Setzt Status auf CANCELLED und speichert</div>
                </div>
            </div>

            <div class="method-card">
                <h4>confirmPayment(Integer orderId, String paymentMethod)</h4>
                <p>Best√§tigt Bestellzahlung und sendet Best√§tigung per E-Mail.</p>
                <div class="method-steps">
                    <div>‚Ä¢ Ruft aktuellen Benutzer ab</div>
                    <div>‚Ä¢ Findet Bestellung nach ID, pr√ºft, dass sie Benutzer geh√∂rt</div>
                    <div>‚Ä¢ Setzt Status auf PAID und speichert</div>
                    <div>‚Ä¢ Generiert Bestell-PDF und sendet E-Mail √ºber MailUtil</div>
                    <div>‚Ä¢ Gibt OrderResponseDto zur√ºck</div>
                </div>
            </div>
        </div>

        <!-- Endpoints -->
        <div class="endpoints-section">
            <h3>REST Endpoints</h3>

            <div class="endpoint-detail">
                <div class="endpoint-header">
                    <span class="http-method post">POST</span>
                    <span class="endpoint-path">/v1/orders</span>
                    <span class="role-badge role-user">USER</span>
                </div>
                <p>Erstellt neue Bestellung f√ºr aktuellen Benutzer</p>
            </div>

            <div class="endpoint-detail">
                <div class="endpoint-header">
                    <span class="http-method get">GET</span>
                    <span class="endpoint-path">/v1/orders/{orderId}</span>
                    <span class="role-badge role-user">USER</span>
                </div>
                <p>Ruft Bestellung nach ID ab (Benutzer sehen nur eigene Bestellungen)</p>
            </div>

            <div class="endpoint-detail">
                <div class="endpoint-header">
                    <span class="http-method get">GET</span>
                    <span class="endpoint-path">/v1/orders/ordersHistory/{userId}</span>
                    <span class="role-badge role-user">USER</span>
                </div>
                <p>Ruft Bestellverlauf des Benutzers ab</p>
            </div>

            <div class="endpoint-detail">
                <div class="endpoint-header">
                    <span class="http-method get">GET</span>
                    <span class="endpoint-path">/v1/orders/cancel/{orderId}</span>
                    <span class="role-badge role-user">USER</span>
                </div>
                <p>Storniert Bestellung</p>
            </div>

            <div class="endpoint-detail">
                <div class="endpoint-header">
                    <span class="http-method get">GET</span>
                    <span class="endpoint-path">/v1/orders/confirm/{orderId}/{payMethod}</span>
                    <span class="role-badge role-user">USER</span>
                </div>
                <p>Best√§tigt Bestellzahlung mit E-Mail-Best√§tigungsversand</p>
            </div>
        </div>

        <!-- Implementierungsmerkmale -->
        <div class="features-section">
            <h3>üîß Implementierungsmerkmale</h3>
            <div class="method-card">
                <div class="method-steps">
                    <div>‚Ä¢ <strong>Zugriffssicherheit:</strong> Benutzer sehen nur eigene Bestellungen, ADMIN/MANAGER haben Zugriff auf alle</div>
                    <div>‚Ä¢ <strong>Bestelllebenszyklus:</strong> Unterst√ºtzung f√ºr Status PENDING_PAYMENT, PAID, CANCELLED, DELIVERED</div>
                    <div>‚Ä¢ <strong>E-Mail-Benachrichtigungen:</strong> Automatischer Versand von Zahlungsbest√§tigungen mit PDF-Rechnung</div>
                    <div>‚Ä¢ <strong>Datenvalidierung:</strong> Validierung von Lieferdaten und Zahlungsmethodenkorrektheit</div>
                    <div>‚Ä¢ <strong>Fehlerbehandlung:</strong> Detaillierte Ausnahmen f√ºr verschiedene Fehlerszenarien</div>
                    <div>‚Ä¢ <strong>Zahlungsintegration:</strong> Unterst√ºtzung verschiedener Zahlungsmethoden (CREDIT_CARD, PAYPAL, BANK_TRANSFER)</div>
                </div>
            </div>
        </div>

        <!-- Gesch√§ftslogik -->
        <div class="business-logic-section">
            <h3>üíº Gesch√§ftslogik</h3>
            <div class="method-card">
                <div class="method-steps">
                    <div>‚Ä¢ <strong>Bestellstatus:</strong> Klarer Workflow von Status√§nderungen von Erstellung bis Abschluss</div>
                    <div>‚Ä¢ <strong>Feste Preise:</strong> Produktpreise werden zum Zeitpunkt der Bestellungserstellung festgelegt</div>
                    <div>‚Ä¢ <strong>Automatisierung:</strong> PDF-Rechnungserstellung und E-Mail-Versand bei Zahlungsbest√§tigung</div>
                    <div>‚Ä¢ <strong>Audit:</strong> Speichern von Bestellungserstellungs- und Aktualisierungsdaten zur Verlaufverfolgung</div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal-footer">
        <button onclick="closeModal()" class="btn btn-primary">Schlie√üen</button>
    </div>
</div>