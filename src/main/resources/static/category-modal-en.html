<div class="modal-content">
    <div class="modal-header">
        <h2>ðŸ“‘ Product Categories Details</h2>
        <button onclick="closeModal()" class="modal-close-btn">&times;</button>
    </div>

    <div class="modal-body">
        <!-- General Description -->
        <div class="description-section">
            <h3>General Description</h3>
            <p>
                CategoryService is responsible for managing product categories in the system,
                provides adding, updating, deleting categories,
                as well as getting paginated list of all categories.
            </p>
        </div>

        <!-- Main Service Methods -->
        <div class="methods-section">
            <h3>Main Service Methods</h3>

            <div class="method-card">
                <h4>addCategory(CategoryRequestDto categoryRequestDto)</h4>
                <p>Adds new category.</p>
                <div class="method-steps">
                    <div>â€¢ Checks that categoryRequestDto is not null</div>
                    <div>â€¢ Checks that category name is not empty</div>
                    <div>â€¢ Validates category name uniqueness</div>
                    <div>â€¢ Processes image via CategoryServiceHelper.resolveImageUrl()</div>
                    <div>â€¢ Creates new category and saves it to database</div>
                    <div>â€¢ Returns CategoryResponseDto of created category</div>
                </div>
            </div>

            <div class="method-card">
                <h4>updateCategory(Integer categoryId, CategoryUpdateDto categoryUpdateDto)</h4>
                <p>Updates existing category by its identifier.</p>
                <div class="method-steps">
                    <div>â€¢ Checks existence of category with specified ID</div>
                    <div>â€¢ If new name provided - validates length (3-20 characters)</div>
                    <div>â€¢ Validates uniqueness of new category name</div>
                    <div>â€¢ If image provided - processes via helper</div>
                    <div>â€¢ Updates corresponding category fields</div>
                    <div>â€¢ Saves changes and returns CategoryResponseDto</div>
                </div>
            </div>

            <div class="method-card">
                <h4>deleteCategory(Integer categoryId)</h4>
                <p>Deletes category by its identifier.</p>
                <div class="method-steps">
                    <div>â€¢ Checks that categoryId is not null</div>
                    <div>â€¢ Checks category existence in database</div>
                    <div>â€¢ Sets category of all related products to null</div>
                    <div>â€¢ Deletes category from database</div>
                    <div>â€¢ Returns CategoryResponseDto of deleted category</div>
                </div>
            </div>

            <div class="method-card">
                <h4>getAllCategories(Pageable pageable)</h4>
                <p>Returns page of all categories with pagination.</p>
                <div class="method-steps">
                    <div>â€¢ Gets page of categories via CategoryRepository</div>
                    <div>â€¢ Converts Category to CategoryResponseDto via CategoryConverter</div>
                    <div>â€¢ Returns Page<CategoryResponseDto></div>
                </div>
            </div>

            <div class="method-card">
                <h4>getCategoryById(Integer categoryId)</h4>
                <p>Returns category by its identifier.</p>
                <div class="method-steps">
                    <div>â€¢ Searches category via CategoryRepository.findByCategoryId()</div>
                    <div>â€¢ If category not found, throws BadRequestException</div>
                    <div>â€¢ Returns Category object (not DTO)</div>
                </div>
            </div>

            <div class="method-card">
                <h4>getCategoryByName(String categoryName)</h4>
                <p>Returns category by its name.</p>
                <div class="method-steps">
                    <div>â€¢ Searches category via CategoryRepository.findByCategoryName()</div>
                    <div>â€¢ If category not found, throws BadRequestException</div>
                    <div>â€¢ Returns Category object (not DTO)</div>
                </div>
            </div>
        </div>

        <!-- DTO Objects -->
        <div class="methods-section">
            <h3>ðŸ“Š DTO Objects</h3>

            <div class="method-card">
                <h4>CategoryRequestDto</h4>
                <p>For creating new category</p>
                <div class="method-steps">
                    <div>â€¢ categoryName: String - category name (required)</div>
                    <div>â€¢ image: String - category image URL</div>
                </div>
            </div>

            <div class="method-card">
                <h4>CategoryUpdateDto</h4>
                <p>For updating existing category</p>
                <div class="method-steps">
                    <div>â€¢ categoryName: String - new category name (optional)</div>
                    <div>â€¢ image: String - new category image (optional)</div>
                </div>
            </div>

            <div class="method-card">
                <h4>CategoryResponseDto</h4>
                <p>Response with category information</p>
                <div class="method-steps">
                    <div>â€¢ categoryId: Integer - category identifier</div>
                    <div>â€¢ categoryName: String - category name</div>
                    <div>â€¢ image: String - category image URL</div>
                </div>
            </div>
        </div>

        <!-- Endpoints -->
        <div class="endpoints-section">
            <h3>REST Endpoints</h3>

            <div class="endpoint-detail">
                <div class="endpoint-header">
                    <span class="http-method post">POST</span>
                    <span class="endpoint-path">/v1/categories</span>
                    <span class="role-badge role-admin">ADMIN</span>
                </div>
                <p>Create new category in system. Requires unique category name.</p>
            </div>

            <div class="endpoint-detail">
                <div class="endpoint-header">
                    <span class="http-method put">PUT</span>
                    <span class="endpoint-path">/v1/categories/{categoryId}</span>
                    <span class="role-badge role-manager">MANAGER</span>
                </div>
                <p>Update existing category by ID. Supports partial updates.</p>
            </div>

            <div class="endpoint-detail">
                <div class="endpoint-header">
                    <span class="http-method delete">DELETE</span>
                    <span class="endpoint-path">/v1/categories/{categoryId}</span>
                    <span class="role-badge role-admin">ADMIN</span>
                </div>
                <p>Delete category from system. Products remain without category (category = null).</p>
            </div>

            <div class="endpoint-detail">
                <div class="endpoint-header">
                    <span class="http-method get">GET</span>
                    <span class="endpoint-path">/v1/categories?page=0&size=20</span>
                    <span class="role-badge role-user">USER</span>
                </div>
                <p>Get paginated list of all categories.</p>
                <div class="method-steps">
                    <div>â€¢ Parameters: page (default 0), size (default 20)</div>
                </div>
            </div>
        </div>

        <!-- Implementation Features -->
        <div class="features-section">
            <h3>ðŸ”§ Implementation Features</h3>
            <div class="method-card">
                <div class="method-steps">
                    <div>â€¢ <strong>Data Validation:</strong> Checking name uniqueness, name length (3-20 characters)</div>
                    <div>â€¢ <strong>Image Processing:</strong> Automatic URL conversion via CategoryServiceHelper</div>
                    <div>â€¢ <strong>Safe Deletion:</strong> Products are not deleted but remain without category</div>
                    <div>â€¢ <strong>Pagination:</strong> Support for paginated output for category list</div>
                    <div>â€¢ <strong>Flexible Updates:</strong> Support for partial field updates</div>
                    <div>â€¢ <strong>Transaction Safety:</strong> All operations performed within transactions</div>
                </div>
            </div>
        </div>

        <!-- Business Logic -->
        <div class="business-logic-section">
            <h3>ðŸ’¼ Business Logic</h3>
            <div class="method-card">
                <div class="method-steps">
                    <div>â€¢ <strong>Category Uniqueness:</strong> Category names must be unique in the system</div>
                    <div>â€¢ <strong>Data Integrity:</strong> Products are not lost when category is deleted</div>
                    <div>â€¢ <strong>Input Validation:</strong> Strict requirements for category name length</div>
                    <div>â€¢ <strong>Image Management:</strong> Centralized URL image processing</div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal-footer">
        <button onclick="closeModal()" class="btn btn-primary">Close</button>
    </div>
</div>