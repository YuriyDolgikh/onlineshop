ConfirmationCodeService – сервисный класс для управления кодами подтверждения пользователей в системе
интернет-магазина. Реализует интерфейс ConfirmationCodeServiceInterface.
Сервис отвечает за генерацию, сохранение, отправку и управление кодами подтверждения для email пользователей.

Аннотации:

* @Service – помечает класс как сервисный компонент Spring.
* @RequiredArgsConstructor – Lombok генерирует конструктор для всех финальных полей.
* @Data – Lombok автоматически создаёт геттеры, сеттеры, equals, hashCode и toString.

Зависимости:

* ConfirmationCodeRepository – репозиторий для работы с сущностью ConfirmationCode.
* MailUtil – утилитный класс для отправки писем пользователям.

Поля:

* EXPIRATION_PERIOD – время жизни кода в днях (по умолчанию 180).
* LINK_PATH – базовая ссылка для подтверждения email.

Основные методы сервиса:

1. confirmationCodeManager(User user)

* Главный метод для управления кодом подтверждения.
* Генерирует уникальный код.
* Сохраняет код в базе данных.
* Отправляет код пользователю на email.

2. sendCodeByEmail(String code, User user)

* Формирует ссылку с кодом и отправляет пользователю через MailUtil.

3. saveConfirmationCode(String generatedCode, User user)

* Сохраняет код подтверждения в базе с привязкой к пользователю.
* Устанавливает дату истечения кода и статус подтверждения.

4. generateCode()

* Генерирует уникальный код с помощью UUID.
* Возвращает строку вида xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx.

5. changeConfirmationStatusByCode(String code)

* Находит код подтверждения по значению.
* Помечает код как подтверждённый.
* Возвращает пользователя, к которому относится код.

6. findCodeByUser(User user)

* Находит код подтверждения для конкретного пользователя.
* Выбрасывает исключение, если пользователь или код не найдены.

7. deleteConfirmationCodeByUser(User user)

* Удаляет код подтверждения для указанного пользователя.
* Выбрасывает исключение, если пользователь или код не найдены.


