OrderItemService – сервисный класс для управления элементами заказа (OrderItem)
в интернет-магазине. Реализует интерфейс OrderItemServiceInterface.
Сервис обеспечивает добавление товаров в заказ, удаление товаров и обновление количества товаров
в существующем заказе.

Аннотации:

* @Service – указывает, что класс является Spring-сервисом.
* @RequiredArgsConstructor – Lombok генерирует конструктор для всех финальных полей.

Зависимости:

* OrderItemRepository – репозиторий для работы с сущностью OrderItem.
* ProductRepository – репозиторий для работы с сущностью Product.
* OrderItemConverter – конвертер между DTO и сущностью OrderItem.
* UserService – сервис для работы с пользователями.

Основные методы:

1. addItemToOrder(OrderItemRequestDto dto)

* Добавляет товар в текущий открытый заказ пользователя.
* Проверяет корректность запроса и наличие продукта.
* Определяет цену товара на момент покупки (с учётом скидки).
* Создаёт новый OrderItem и сохраняет его.
* Возвращает OrderItemResponseDto.

2. deleteItemFromOrder(Integer orderItemId)

* Удаляет товар из заказа по ID.
* Проверяет, что ID не null.
* Удаляет элемент из заказа и базы данных.

3. updateItemQuantityInOrder(OrderItemUpdateDto dto)

* Обновляет количество товара в заказе.
* Проверяет корректность запроса и минимальное количество (1).
* Сохраняет изменения и возвращает обновлённый DTO.

Вспомогательные методы:

* getCurrentOrder(User user) – возвращает текущий открытый заказ пользователя.
  Выбрасывает NotFoundException, если открытого заказа нет.


