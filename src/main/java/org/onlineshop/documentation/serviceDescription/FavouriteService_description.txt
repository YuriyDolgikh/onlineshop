Описание сервиса FavouriteService

Сервис FavouriteService отвечает за управление списком избранных товаров пользователя.
Он реализует интерфейс FavouriteServiceInterface и обеспечивает добавление,
удаление и получение избранных товаров.

Основные зависимости:

  * FavouriteRepository — для работы с хранилищем избранных товаров (поиск, сохранение, удаление).

  * UserService — для получения текущего авторизованного пользователя.

  * ProductRepository — для проверки существования и получения данных о товаре.

  * FavouriteConverter — для преобразования сущностей Favourite в DTO-объекты FavouriteResponseDto.

Основные методы:

 1. addFavourite(Integer productId)
    Добавляет товар в список избранных пользователя.

   * Проверяет, что идентификатор товара не равен null.

   * Получает текущего пользователя через UserService.

   * Проверяет существование товара в базе данных через ProductRepository.

   * Проверяет, что данный товар ещё не добавлен в избранное.

   * Создаёт новый объект Favourite, сохраняет его в базе данных и возвращает DTO с данными об этом элементе.

   * В случае ошибок выбрасывает исключения IllegalArgumentException, NotFoundException или BadRequestException.

2. deleteFavourite(Integer productId) 
   Удаляет товар из списка избранных пользователя.

   * Проверяет, что идентификатор товара не равен null.

   * Получает текущего пользователя через UserService.

   * Ищет избранный товар у данного пользователя.

   * Удаляет найденный объект Favourite из базы данных.

   * Возвращает DTO удалённого избранного товара.

   * В случае ошибок выбрасывает исключения IllegalArgumentException или NotFoundException.

3. getFavourites()
   Возвращает список всех избранных товаров текущего пользователя.

   * Получает текущего пользователя через UserService.

   * Извлекает все избранные товары пользователя из базы данных через FavouriteRepository.

   * Преобразует список Favourite в список FavouriteResponseDto с помощью FavouriteConverter.


