Описание сервиса UserService

Сервис UserService отвечает за управление пользователями, включая регистрацию,
 подтверждение email, обновление данных, удаление, восстановление пользователей и шифрование паролей,
 а также получения информации о текущем пользователе.

Основные методы:

1. registration(UserRequestDto request)
   Регистрация нового пользователя.
   * Проверяет, существует ли пользователь с таким email.
   * Валидирует обязательные поля name и hashPassword.
   * Создаёт нового пользователя с ролью USER и статусом NOT_CONFIRMED.
   * Сохраняет пользователя в БД.
   * Генерирует и отправляет код подтверждения через confirmationCodeService.
   * Возвращает UserResponseDto.

2. getAllUsers()
   Получает список всех пользователей.
   * Возвращает список UserResponseDto.

3. getUserById(Integer id)
   Получает пользователя по ID.
   * Исключения: NotFoundException, если пользователь не найден.
   * Возвращает UserResponseDto.

4. confirmationEmail(String code)
   Подтверждение email пользователя по коду.
   * Меняет статус пользователя на CONFIRMED.
   * Сохраняет пользователя.
   * Возвращает сообщение об успешном подтверждении.

5. updateUser(Integer userId, UserUpdateRequestDto updateRequest)
   Обновление данных пользователя.
   * Проверяет существование пользователя.
   * Проверяет, что обновление выполняется текущим пользователем.
   * Обновляет переданные поля (username, phoneNumber, hashPassword).
   * Сохраняет изменения.
   * Возвращает UserResponseDto.

6. deleteUser(Integer userId)
   Логическое удаление пользователя.
   * Проверяет существование пользователя.
   * Запрещает удаление ADMIN пользователю.
   * Проверяет права текущего пользователя.
   * Удаляет коды подтверждения пользователя.
   * Меняет статус на DELETED.
   * Сохраняет пользователя.
   * Возвращает UserResponseDto.

7. renewUser(String email)
   Восстановление удалённого пользователя.
   * Проверяет email.
   * Проверяет, что пользователь удалён.
   * Генерирует новый код подтверждения.
   * Меняет статус на NOT_CONFIRMED.
   * Сохраняет пользователя.
   * Возвращает UserResponseDto.

Дополнительные методы:

* getUserByIdForAdmin(Integer id) — получение пользователя по ID без DTO, для админа.
* getAllUsersFullDetails() — получение всех пользователей с полными данными.
* getUserByEmail(String email) — получение UserResponseDto по email.
* getUserByEmailOrThrow(String email) — получение User по email или выброс исключения.
* getCurrentUser() — получение текущего аутентифицированного пользователя.
* getCurrentUserEmail() — получение email текущего пользователя.

Примечания:
* Используются механизмы Spring Security для получения текущего пользователя.
* Пароли кодируются через PasswordEncoder.
